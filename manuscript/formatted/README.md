# Formatted Manuscript Outputs

**Physical AI, Simulation AI & Humanoid Robotics Book**

This directory contains formatted outputs for print and digital publication.

---

## Print Format (PDF)

**Script**: `format-print.ps1`

**Requirements**:
- Pandoc 3.7+
- LaTeX/XeLaTeX (MiKTeX or TeX Live)
- All chapter markdown files in `manuscript/` directory

**Usage**:
```powershell
.\format-print.ps1 -OutputDir "manuscript/formatted/print" -OutputFile "book.pdf"
```

**Output**: PDF file with:
- Table of contents with page numbers
- Proper page layout (margins, headers, footers)
- Numbered sections
- Figure placement
- Bibliography and appendices

---

## Digital Formats (EPUB, MOBI, HTML)

**Script**: `format-digital.ps1`

**Requirements**:
- Pandoc 3.7+
- For MOBI: KindleGen or Calibre ebook-convert

**Usage**:
```powershell
# Generate EPUB
.\format-digital.ps1 -EPUB

# Generate HTML
.\format-digital.ps1 -HTML

# Generate all formats
.\format-digital.ps1 -EPUB -MOBI -HTML
```

**Outputs**:
- EPUB file (`.epub`) - Standard ebook format
- MOBI file (`.mobi`) - Kindle format (requires conversion from EPUB)
- HTML file (`index.html`) - Web version

---

## Formatting Pipeline

### Step 1: Collect All Chapters

The scripts collect chapters from:
- `manuscript/front-matter/` - Title, copyright, preface
- `manuscript/part1/` through `manuscript/part7/` - All chapters
- `manuscript/appendices/` - Glossary, bibliography, index
- `manuscript/back-matter/` - About authors

### Step 2: Combine Markdown Files

All markdown files are combined into a single `combined.md` file with proper separators.

### Step 3: Generate Formats

- **PDF**: Uses Pandoc with XeLaTeX engine
- **EPUB**: Uses Pandoc EPUB generator
- **HTML**: Uses Pandoc standalone HTML generator
- **MOBI**: Convert from EPUB using Calibre

---

## Customization

### PDF Customization

Edit `format-print.ps1` to customize:
- Page margins (`-V geometry:margin=1in`)
- Font size (`-V fontsize=11pt`)
- Line spacing (`-V linestretch=1.2`)
- Document class (`-V documentclass=book`)

### EPUB Customization

Edit `format-digital.ps1` to customize:
- Cover image (`--epub-cover-image`)
- Metadata (title, author, date)
- Table of contents depth (`--toc-depth=3`)

---

## Notes

1. **LaTeX Required for PDF**: PDF generation requires LaTeX/XeLaTeX. Install MiKTeX (Windows) or TeX Live (Linux/Mac).

2. **MOBI Conversion**: MOBI files are generated by converting EPUB using Calibre's `ebook-convert` tool:
   ```bash
   ebook-convert input.epub output.mobi
   ```

3. **Figure Handling**: Mermaid diagrams need to be converted to SVG/images before PDF generation. See T217 for diagram conversion.

4. **Page Numbers**: Table of contents page numbers are generated automatically by Pandoc during PDF generation.

---

## Status

- ✅ Formatting scripts created
- ⚠️ Requires LaTeX for PDF generation
- ⚠️ Requires all chapters to be collected
- ⚠️ Diagrams need SVG conversion (T217)

---

**Last Updated**: 2025-12-02

